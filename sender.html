<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <title>PsB | New Shipment</title>
</head>
<body class="bg-[#050505] text-white p-6">
    <div class="max-w-4xl mx-auto pt-10">
        <div class="flex justify-between items-center mb-10">
            <button onclick="location.href='index.html'" class="text-slate-500 hover:text-white flex items-center gap-2 transition">
                <i data-lucide="arrow-left" class="w-4 h-4"></i> Back Home
            </button>
            <h1 class="text-xl font-black text-teal-500 uppercase italic">Create Shipment</h1>
        </div>

        <div class="bg-white/5 p-10 rounded-[3rem] border border-white/10 grid grid-cols-1 lg:grid-cols-2 gap-12">
            <div class="space-y-6">
                <p class="text-[10px] font-black text-teal-500 uppercase tracking-widest">Delivery Info</p>
                <input id="sName" type="text" placeholder="Sender Full Name" class="w-full bg-black border border-white/10 p-4 rounded-xl outline-none focus:border-teal-500">
                <input id="rName" type="text" placeholder="Receiver Full Name" class="w-full bg-black border border-white/10 p-4 rounded-xl outline-none focus:border-teal-500">
                <input id="rPhone" type="text" placeholder="Receiver Phone Number" class="w-full bg-black border border-white/10 p-4 rounded-xl outline-none focus:border-teal-500">
                <input id="rLoc" type="text" placeholder="Drop-off Area (e.g. Area 10)" class="w-full bg-black border border-white/10 p-4 rounded-xl outline-none focus:border-teal-500">
                
                <select id="pWeight" class="w-full bg-black border border-white/10 p-4 rounded-xl outline-none text-slate-400">
                    <option value="2000">Small Parcel (< 1kg) - MWK 2,000</option>
                    <option value="4000">Medium Parcel (2-5kg) - MWK 4,000</option>
                    <option value="7000">Large Parcel (5-10kg) - MWK 7,000</option>
                </select>
            </div>

            <div class="space-y-4">
                <p class="text-[10px] font-black text-teal-500 uppercase tracking-widest">Select Payment Method</p>
                <div class="space-y-3">
                    <label class="block cursor-pointer" onclick="navigator.clipboard.writeText('0992416051'); alert('Airtel Number Copied!')">
                        <input type="radio" name="pay" value="Airtel" class="hidden peer" checked>
                        <div class="p-4 rounded-2xl border border-white/10 peer-checked:border-teal-500 peer-checked:bg-teal-500/10 relative">
                            <p class="font-bold text-sm">Airtel Money</p>
                            <p class="text-[10px] text-slate-500">099 241 60 51 (Tap to Copy)</p>
                            <i data-lucide="copy" class="absolute top-4 right-4 w-4 h-4 opacity-50"></i>
                        </div>
                    </label>
                    <label class="block cursor-pointer" onclick="navigator.clipboard.writeText('0897452072'); alert('Mpamba Number Copied!')">
                        <input type="radio" name="pay" value="Mpamba" class="hidden peer">
                        <div class="p-4 rounded-2xl border border-white/10 peer-checked:border-teal-500 peer-checked:bg-teal-500/10 relative">
                            <p class="font-bold text-sm">TNM Mpamba</p>
                            <p class="text-[10px] text-slate-500">089 745 20 72 (Tap to Copy)</p>
                            <i data-lucide="copy" class="absolute top-4 right-4 w-4 h-4 opacity-50"></i>
                        </div>
                    </label>
                </div>
                <button onclick="submitShipment()" class="w-full bg-teal-500 text-black font-black py-5 rounded-2xl mt-6 uppercase tracking-widest shadow-lg shadow-teal-500/20">Generate Security Code</button>
            </div>
        </div>
    </div>

    <div id="codeModal" class="fixed inset-0 bg-black/98 hidden items-center justify-center p-6 z-50">
        <div class="bg-[#111] p-12 rounded-[3rem] text-center border border-teal-500/30 max-w-sm w-full">
            <h2 class="text-3xl font-black mb-6 uppercase">Shipment Ready</h2>
            <div class="bg-white/5 py-8 rounded-3xl mb-8">
                <span class="text-[10px] text-teal-500 font-bold uppercase block mb-2 tracking-widest">Security Code</span>
                <span id="displayCode" class="text-6xl font-black text-white tracking-widest">0000</span>
            </div>
            <button onclick="location.href='index.html'" class="w-full bg-white text-black font-black py-4 rounded-xl uppercase tracking-widest">Finish</button>
        </div>
    </div>

    <script>
        lucide.createIcons();
        function submitShipment() {
            const payMethod = document.querySelector('input[name="pay"]:checked').value;
            const data = {
                sender: document.getElementById('sName').value,
                receiver: document.getElementById('rName').value,
                rPhone: document.getElementById('rPhone').value,
                rLoc: document.getElementById('rLoc').value,
                price: document.getElementById('pWeight').value,
                payment: payMethod,
                code: Math.floor(1000 + Math.random() * 9000),
                status: 'In-Transit',
                date: new Date().toLocaleString()
            };
            if(!data.sender || !data.receiver || !data.rPhone) return alert("Fill all details");
            let db = JSON.parse(localStorage.getItem('psb_db')) || [];
            db.push(data);
            localStorage.setItem('psb_db', JSON.stringify(db));
            document.getElementById('displayCode').innerText = data.code;
            document.getElementById('codeModal').style.display = 'flex';
        }
    </script>
</body>
</html>